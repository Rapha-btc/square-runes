Raw transaction
See less
{
  "value": {
    "global": {
      "unsignedTx": {
        "version": 2,
        "inputs": [
          {
            "txid": "0659b0f10a975c8062be88ee22d2c28f398278ce63e9f7f87ab35abd8b4ea61d",
            "index": 10,
            "finalScriptSig": "",
            "sequence": 4294967295
          },
          {
            "txid": "e92a187e61f6e358785257e8e08469680ee280d89bf7ae3d01e830e8a0dd1624",
            "index": 2,
            "finalScriptSig": "",
            "sequence": 4294967295
          },
          {
            "txid": "cd9a3a8ad12f56d169f28ecd9593285f1a304f8b78daee7b4aec269dc29202fd",
            "index": 8,
            "finalScriptSig": "",
            "sequence": 4294967295
          },
          {
            "txid": "933147f0a5b68d75d249ae2b0ecb5f9e1eef8746cf57337d6a5b0057db82223e",
            "index": 2,
            "finalScriptSig": "",
            "sequence": 4294967295
          },
          {
            "txid": "0a4f42d0e59fa691fe806645cec2b470df8bf4cec90c41adba8a57d35177be4d",
            "index": 3,
            "finalScriptSig": "",
            "sequence": 4294967295
          },
          {
            "txid": "5ec06fa4d2be34b826f03e5623ec5a4e1ef36b0e78c92f12aa164dbbe7ad3e3e",
            "index": 8,
            "finalScriptSig": "",
            "sequence": 4294967295
          },
          {
            "txid": "f36639a5d06ad1278f7d51671fbfa85e96c874aebb556fb806091c02509f09e2",
            "index": 10,
            "finalScriptSig": "",
            "sequence": 4294967295
          },
          {
            "txid": "71031dbfbfb1e83a1c80811c72d2fb8cffa6ae50b0a8fbe59ec7674eacb2ea9f",
            "index": 2,
            "finalScriptSig": "",
            "sequence": 4294967295
          },
          {
            "txid": "5dee32fc41fd5a8787998fa6bab062c0c483aedac54d6a255800822dc338d25e",
            "index": 2,
            "finalScriptSig": "",
            "sequence": 4294967295
          }
        ],
        "outputs": [
          {
            "amount": "546",
            "script": "51206a74a436821e1896f31f38f78d3e085775e965e18758d2243310af7bb9d38153"
          },
          {
            "amount": "0",
            "script": "6a5d0d160200caa2338b0788e0ea0100"
          },
          {
            "amount": "546",
            "script": "5120ddf7a1a27ecc00bd8f22dce36d0884e85d3f00f266056c323b64d66a91ba5093"
          },
          {
            "amount": "6463",
            "script": "001419948bca9dca19ca371870376070e7750029cbc8"
          }
        ],
        "lockTime": 0
      }
    },
    "inputs": [
      {
        "witnessUtxo": {
          "amount": "546",
          "script": "5120ddf7a1a27ecc00bd8f22dce36d0884e85d3f00f266056c323b64d66a91ba5093"
        },
        "tapInternalKey": "a2d8486ea4b6d4ce33c0fa334bea3d2c72476d982f74f74fe4267eb58bc78f21"
      },
      {
        "witnessUtxo": {
          "amount": "546",
          "script": "5120ddf7a1a27ecc00bd8f22dce36d0884e85d3f00f266056c323b64d66a91ba5093"
        },
        "tapInternalKey": "a2d8486ea4b6d4ce33c0fa334bea3d2c72476d982f74f74fe4267eb58bc78f21"
      },
      {
        "witnessUtxo": {
          "amount": "546",
          "script": "5120ddf7a1a27ecc00bd8f22dce36d0884e85d3f00f266056c323b64d66a91ba5093"
        },
        "tapInternalKey": "a2d8486ea4b6d4ce33c0fa334bea3d2c72476d982f74f74fe4267eb58bc78f21"
      },
      {
        "witnessUtxo": {
          "amount": "546",
          "script": "5120ddf7a1a27ecc00bd8f22dce36d0884e85d3f00f266056c323b64d66a91ba5093"
        },
        "tapInternalKey": "a2d8486ea4b6d4ce33c0fa334bea3d2c72476d982f74f74fe4267eb58bc78f21"
      },
      {
        "witnessUtxo": {
          "amount": "546",
          "script": "5120ddf7a1a27ecc00bd8f22dce36d0884e85d3f00f266056c323b64d66a91ba5093"
        },
        "tapInternalKey": "a2d8486ea4b6d4ce33c0fa334bea3d2c72476d982f74f74fe4267eb58bc78f21"
      },
      {
        "witnessUtxo": {
          "amount": "546",
          "script": "5120ddf7a1a27ecc00bd8f22dce36d0884e85d3f00f266056c323b64d66a91ba5093"
        },
        "tapInternalKey": "a2d8486ea4b6d4ce33c0fa334bea3d2c72476d982f74f74fe4267eb58bc78f21"
      },
      {
        "witnessUtxo": {
          "amount": "546",
          "script": "5120ddf7a1a27ecc00bd8f22dce36d0884e85d3f00f266056c323b64d66a91ba5093"
        },
        "tapInternalKey": "a2d8486ea4b6d4ce33c0fa334bea3d2c72476d982f74f74fe4267eb58bc78f21"
      },
      {
        "witnessUtxo": {
          "amount": "546",
          "script": "5120ddf7a1a27ecc00bd8f22dce36d0884e85d3f00f266056c323b64d66a91ba5093"
        },
        "tapInternalKey": "a2d8486ea4b6d4ce33c0fa334bea3d2c72476d982f74f74fe4267eb58bc78f21"
      },
      {
        "witnessUtxo": {
          "amount": "7954",
          "script": "001419948bca9dca19ca371870376070e7750029cbc8"
        }
      }
    ],
    "outputs": [
      {},
      {},
      {},
      {}
    ]
  }
}

Great, this gives us a clear view of a real Runes transaction! Let's analyze the OP_RETURN data from this transaction:

```
"script": "6a5d0d160200caa2338b0788e0ea0100"
```

Breaking this down:

## Runes Protocol Data Analysis

- `6a`: OP_RETURN marker
- `5d`: OP_13 (Runes protocol marker)
- `0d`: Tag 13 (This is interesting - different from the tag 0 we expected for a transfer edict)
- `1602`: LEB128 encoded block height where the Rune was created (decoded as 534)
- `00`: LEB128 encoded transaction index (decoded as 0)
- `caa2338b`: LEB128 encoded value (possibly the amount)
- `0788e0ea0100`: Additional data (likely specifying outputs and other parameters)

This is a more complex Runes transaction than our simple parser currently handles. It appears to be using a different tag type (13 instead of 0) and has a more complex data structure.

Let's try to modify our test to parse just this specific runestone:

```
(contract-call? .leb128-decoder test-decode-runestone-parts 0x6a5d0d160200caa2338b0788e0ea0100)
```

This would help us see what our parser extracts from this real-world data.

For our bridge implementation, we would need to:

1. Update our parser to handle different tag types (not just tag 0)
2. Decode the more complex data structure
3. Identify where the Rune is being sent

The good news is that our LEB128 decoder is already working correctly! It can decode these variable-length integers. We just need to extend our Runes parser to handle more complex transfer patterns.

If we wanted to use this in our bridge, we would:

1. Extract the Rune ID (534:0 in this case)
2. Look up which SIP-010 token corresponds to this Rune in our registry
3. Determine the recipient(s) and amount(s)
4. Mint the appropriate SIP-010 tokens to the recipients

This is definitely a more advanced case than our simple parser handles, but it's a good real-world example to work with. Would you like me to extend our parser to handle this type of transaction, or should we keep focusing on the simpler single-transfer case for now?